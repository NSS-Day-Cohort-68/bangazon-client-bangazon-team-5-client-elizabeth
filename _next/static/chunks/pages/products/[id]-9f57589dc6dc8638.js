(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{2338:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return t(3953)}])},900:function(e,n,t){"use strict";t.d(n,{II:function(){return r},Ph:function(){return s},gx:function(){return i}});var a=t(5893);function r(e){var n=e.id,t=e.type,r=void 0===t?"text":t,s=e.placeholder,i=void 0===s?"":s,c=e.refEl,o=void 0===c?void 0:c,l=e.label,d=void 0===l?void 0:l,u=e.onChangeEvent,h=e.addlClass,m=void 0===h?"":h,f=e.children;return(0,a.jsxs)("div",{className:"field ".concat(m),children:[d&&(0,a.jsx)("label",{className:"label",children:d}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:n,placeholder:i,className:"input",type:r,ref:o,onChange:u})}),f]})}function s(e){var n=e.id,t=e.refEl,r=e.options,s=e.title,i=e.label,c=e.addlClass,o=void 0===c?"":c;return(0,a.jsxs)("div",{className:"field is-expanded",children:[i?(0,a.jsx)("label",{className:"label",children:i}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:"select ".concat(o," is-fullwidth"),children:(0,a.jsxs)("select",{id:n,ref:t,children:[(0,a.jsx)("option",{value:"0",children:s}),r.map((function(e){return(0,a.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]})}function i(e){var n=e.id,t=e.label,r=e.placeholder;return(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:t}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{id:n,className:"textarea",placeholder:r})})]})}},2469:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var a=t(5893),r=t(9008),s=t(7569);function i(e){var n=e.children;return(0,a.jsx)(s.O,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{children:(0,a.jsx)("title",{children:"Bangazon"})}),(0,a.jsx)("main",{className:"container",children:n})]})})}},8757:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(5893);function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);a=!0);}catch(o){r=!0,s=o}finally{try{a||null==c.return||c.return()}finally{if(r)throw s}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){var n=e.showModal,t=e.setShowModal,s=e.title,i=r(e.children,2),c=i[0],o=i[1];return(0,a.jsxs)("div",{className:n?"modal is-active":"modal",children:[(0,a.jsx)("div",{className:"modal-background"}),(0,a.jsxs)("div",{className:"modal-card",children:[(0,a.jsxs)("header",{className:"modal-card-head",children:[(0,a.jsx)("p",{className:"modal-card-title",children:s}),(0,a.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return t(!1)}})]}),(0,a.jsx)("section",{className:"modal-card-body",children:c}),(0,a.jsx)("footer",{className:"modal-card-foot",children:o})]})]})}},1127:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var a=t(5893),r=t(1664),s=t(1163),i=t(7294),c=t(7569);function o(){var e=(0,c.b)(),n=e.token,t=e.setToken,o=e.profile,l=(e.setProfile,(0,i.useRef)()),d=(0,i.useRef)(),u=(0,i.useState)(!1),h=u[0],m=u[1],f=(0,s.useRouter)();(0,i.useEffect)((function(){m(!!n)}),[n]);return(0,a.jsxs)("nav",{className:"navbar mb-3 is-warning px-5 is-fixed-top is-top",role:"navigation","aria-label":"main navigation",children:[(0,a.jsxs)("div",{className:"navbar-brand",children:[(0,a.jsx)(r.default,{href:"/",children:(0,a.jsx)("img",{src:"/images/logo.png",alt:"Logo",style:{width:"4rem",height:"4rem"},className:"relative"})}),(0,a.jsxs)("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",ref:l,onClick:function(){l.current.classList.toggle("is-active"),d.current.classList.toggle("is-active")},children:[(0,a.jsx)("span",{"aria-hidden":"true"}),(0,a.jsx)("span",{"aria-hidden":"true"}),(0,a.jsx)("span",{"aria-hidden":"true"})]})]}),(0,a.jsxs)("div",{className:"navbar-menu",ref:d,children:[(0,a.jsxs)("div",{className:"navbar-start",children:[(0,a.jsx)(r.default,{href:"/products",children:(0,a.jsx)("a",{className:"navbar-item",children:"Products"})}),(0,a.jsx)(r.default,{href:"/stores",children:(0,a.jsx)("a",{className:"navbar-item",children:"Stores"})})]}),(0,a.jsx)("div",{className:"navbar-end",children:h?(0,a.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[(0,a.jsx)("a",{className:"navbar-link",children:(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fas fa-user-circle is-medium"})})}),(0,a.jsxs)("div",{className:"navbar-dropdown is-right",children:[(0,a.jsx)(r.default,{href:"/cart",children:(0,a.jsx)("a",{className:"navbar-item",children:"Cart"})}),(0,a.jsx)(r.default,{href:"/my-orders",children:(0,a.jsx)("a",{className:"navbar-item",children:"My Orders"})}),(0,a.jsx)(r.default,{href:"/payments",children:(0,a.jsx)("a",{className:"navbar-item",children:"Payment Methods"})}),(0,a.jsx)(r.default,{href:"/profile",children:(0,a.jsx)("a",{className:"navbar-item",children:"Profile"})}),o.store?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{href:"/stores/".concat(o.store.id),children:(0,a.jsx)("a",{className:"navbar-item",children:"View Your Store"})}),(0,a.jsx)(r.default,{href:"/products/new",children:(0,a.jsx)("a",{className:"navbar-item",children:"Add a new Product"})})]}):(0,a.jsx)(r.default,{href:"/stores/new",children:(0,a.jsx)("a",{className:"navbar-item",children:"Interested in selling?"})}),(0,a.jsx)("hr",{className:"navbar-divider"}),(0,a.jsx)("a",{className:"navbar-item",onClick:function(){localStorage.removeItem("token"),t(""),f.push("/login")},children:"Log out"})]})]}):(0,a.jsx)("div",{className:"navbar-item",children:(0,a.jsxs)("div",{className:"buttons",children:[(0,a.jsx)(r.default,{href:"/register",children:(0,a.jsx)("a",{className:"button is-primary",children:(0,a.jsx)("strong",{children:"Sign up"})})}),(0,a.jsx)(r.default,{href:"/login",children:(0,a.jsx)("a",{className:"button is-light",children:"Log in"})})]})})})]})]})}},7569:function(e,n,t){"use strict";t.d(n,{O:function(){return u},b:function(){return h}});var a=t(5666),r=t.n(a),s=t(5893),i=t(7294),c=t(4799),o=t(1163);function l(e,n,t,a,r,s,i){try{var c=e[s](i),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(a,r)}var d=(0,i.createContext)();function u(e){var n=e.children,t=(0,i.useState)({}),a=t[0],u=t[1],h=(0,i.useState)(""),m=h[0],f=h[1],x=(0,o.useRouter)();return(0,i.useEffect)((function(){f(localStorage.getItem("token"))}),[]),(0,i.useEffect)((function(){var e,n=(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.et)();case 2:(n=e.sent)&&u(n);case 4:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(a,r){var s=e.apply(n,t);function i(e){l(s,a,r,i,c,"next",e)}function c(e){l(s,a,r,i,c,"throw",e)}i(void 0)}))});m?(localStorage.setItem("token",m),["/login","/register"].includes(x.pathname)||n()):u({})}),[m,x.pathname]),(0,s.jsx)(d.Provider,{value:{profile:a,token:m,setToken:f,setProfile:u},children:n})}function h(){return(0,i.useContext)(d)}},4799:function(e,n,t){"use strict";t.d(n,{x4:function(){return r},z2:function(){return s},et:function(){return i}});var a=t(8519);function r(e){return(0,a.D)("login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function s(e){return(0,a.D)("register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function i(){return(0,a.D)("profile",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}},8519:function(e,n,t){"use strict";t.d(n,{D:function(){return c},G:function(){return o}});var a="https://goldfish-app-2wpc5.ondigitalocean.app",r=function(e){if(!e.ok)throw Error(e.status);return e},s=function(e){if(200!==e.status)throw Error(e.status);return e.json()},i=function(e){if("401"===e.message&&(window.location.href="/login"),"404"===e.message)throw Error(e.message)},c=function(e,n){return fetch("".concat(a,"/").concat(e),n).then(s).catch(i)},o=function(e,n){return fetch("".concat(a,"/").concat(e),n).then(r).catch(i)}},1648:function(e,n,t){"use strict";t.d(n,{dv:function(){return r},dA:function(){return s},AU:function(){return i},J1:function(){return c},wH:function(){return o}});var a=t(8519);function r(){return(0,a.D)("cart",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function s(e){return(0,a.G)("/cart",{method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({product_id:e})})}function i(){return(0,a.D)("orders",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function c(e,n){return(0,a.D)("orders/".concat(e),{method:"PUT",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({payment_type:n})})}function o(){return(0,a.G)("profile/cart",{method:"DELETE",headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}},288:function(e,n,t){"use strict";t.d(n,{Xp:function(){return r},CP:function(){return s},gk:function(){return i},SA:function(){return c},Ir:function(){return o},H1:function(){return l},gK:function(){return d},zG:function(){return u},_$:function(){return h},L8:function(){return m},SK:function(){return f}});var a=t(8519);function r(e){var n=void 0===e?void 0:e,t="products";return n&&(t+="?".concat(n)),(0,a.D)(t,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function s(){return(0,a.D)("productcategories",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function i(e){return(0,a.D)("products/".concat(e),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function c(e){return(0,a.G)("cart/".concat(e),{method:"DELETE",headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function o(e){return(0,a.G)("products/".concat(e),{method:"DELETE",headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}})}function l(e,n){return(0,a.D)("products/".concat(e,"/rate-product"),{method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(n)})}function d(e){return(0,a.D)("products",{method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)})}function u(e,n){return(0,a.G)("products/".concat(e),{method:"PUT",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(n)})}function h(e,n){return(0,a.D)("products/".concat(e,"/recommend"),{method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({username:n})})}function m(e){return(0,a.G)("products/".concat(e,"/like"),{method:"POST",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})}function f(e){return(0,a.G)("products/".concat(e,"/unlike"),{method:"DELETE",headers:{Authorization:"Token ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})}},3953:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var a=t(5893),r=t(1163),s=t(7294),i=t(2469),c=t(1127),o=t(288),l=t(8757),d=t(900),u=t(1648);function h(e){var n,t=e.product,i=e.like,c=e.unlike,h=(0,r.useRouter)(),m=(0,s.useRef)(),f=(0,s.useState)(!1),x=f[0],j=f[1],v=(0,s.useState)(!1),p=v[0],g=v[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Z,{setShowModal:j,showModal:x,title:"Recommend this product to a user",children:[(0,a.jsx)(d.II,{id:"username",label:"Enter a username",refEl:m,children:p?(0,a.jsx)("p",{className:"help is-danger",children:"This user doesn't exist"}):(0,a.jsx)(a.Fragment,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"button is-success",onClick:function(){(0,o._$)(t.id,m.current.value).then((function(e){e?g(!0):(j(!1),g(!1),m.current.value="")}))},children:"Recommend Product"}),(0,a.jsx)("button",{className:"button",onClick:function(){return j(!1)},children:"Cancel"})]})]}),(0,a.jsxs)("div",{className:"tile is-ancestor",children:[(0,a.jsx)("div",{className:"tile is-parent",children:(0,a.jsx)("article",{className:"tile is-child",children:(0,a.jsx)("figure",{className:"image is-4by3",children:(0,a.jsx)("img",{src:"https://bulma.io/images/placeholders/640x480.png"})})})}),(0,a.jsxs)("div",{className:"tile is-parent is-vertical ",children:[(0,a.jsxs)("article",{className:"tile is-child",children:[(0,a.jsxs)("h1",{className:"title",children:[t.name," - $",t.price]}),(0,a.jsx)("p",{className:"subtitle",children:null===(n=t.store)||void 0===n?void 0:n.name}),(0,a.jsx)("p",{children:t.description}),(0,a.jsxs)("p",{children:["Pick up available in: ",t.location]})]}),(0,a.jsx)("article",{className:"tile is-child is-align-self-center",children:(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("p",{className:"control",children:(0,a.jsx)("button",{className:"button is-primary",onClick:function(){(0,u.dA)(t.id).then((function(){h.push("/cart")}))},children:"Add to Cart"})}),(0,a.jsx)("p",{className:"control",children:(0,a.jsx)("button",{className:"button is-danger is-outlined",onClick:function(){return j(!0)},children:"Recommend this Product"})}),(0,a.jsx)("p",{className:"control",children:t.is_liked?(0,a.jsxs)("button",{className:"button is-link is-outlined",onClick:c,children:[(0,a.jsx)("span",{className:"icon is-small",children:(0,a.jsx)("i",{className:"fas fa-heart-broken"})}),(0,a.jsx)("span",{children:"Unlike Product"})]}):(0,a.jsxs)("button",{className:"button is-link is-outlined",onClick:i,children:[(0,a.jsx)("span",{className:"icon is-small",children:(0,a.jsx)("i",{className:"fas fa-heart"})}),(0,a.jsx)("span",{children:"Like Product"})]})})]})})]})]})]})}var m=t(3773);function f(e){var n=e.rating;return(0,a.jsx)("div",{className:"tile is-child",children:(0,a.jsxs)("article",{className:"media box is-align-items-center",children:[(0,a.jsx)("figure",{className:"media-left",children:(0,a.jsx)(m.i,{initialValue:n.score,readonly:!0})}),(0,a.jsx)("div",{className:"media-content",children:(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("p",{children:n.review})})})]})})}function x(e){var n=e.saveRating,t=(0,s.useState)(0),r=t[0],i=t[1],c=(0,s.useState)(""),o=c[0],l=c[1];return(0,a.jsx)("div",{className:"tile is-child ",children:(0,a.jsxs)("article",{className:"media box",children:[(0,a.jsx)("figure",{className:"media-left",children:(0,a.jsx)(m.i,{onClick:i,ratingValue:r})}),(0,a.jsxs)("div",{className:"media-content",children:[(0,a.jsx)("div",{className:"field",children:(0,a.jsx)("p",{className:"control",children:(0,a.jsx)("textarea",{className:"textarea",placeholder:"Add your review",value:o,onChange:function(e){return l(e.target.value)}})})}),(0,a.jsx)("div",{className:"field",children:(0,a.jsx)("p",{className:"control",children:(0,a.jsx)("button",{className:"button",onClick:function(){n({score:r/20,review:o})},children:"Post Rating"})})})]})]})})}function j(e){var n=e.ratings,t=e.saveRating;return(0,a.jsxs)("div",{className:"tile is-parent is-12 is-vertical container",children:[(0,a.jsx)(x,{saveRating:t}),null===n||void 0===n?void 0:n.map((function(e){return(0,a.jsx)(f,{rating:e},e.id)}))]})}function v(e){var n=e.averageRating,t=e.ratingsLen,r=e.numberPurchased,s=e.likesLength;return(0,a.jsx)("div",{className:"tile is-parent is-12",children:(0,a.jsx)("div",{className:"tile is-child",children:(0,a.jsxs)("section",{className:"level has-background-primary",children:[(0,a.jsx)("div",{className:"level-item has-text-centered",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"heading",children:"Avg. Rating"}),(0,a.jsx)("p",{className:"title",children:n})]})}),(0,a.jsx)("div",{className:"level-item has-text-centered",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"heading",children:"# of Reviews"}),(0,a.jsx)("p",{className:"title",children:t})]})}),(0,a.jsx)("div",{className:"level-item has-text-centered",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"heading",children:"Purchased"}),(0,a.jsxs)("p",{className:"title",children:[r," times"]})]})}),(0,a.jsx)("div",{className:"level-item has-text-centered",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"heading",children:"Likes"}),(0,a.jsx)("p",{className:"title",children:s})]})})]})})})}function p(e){var n=e.average_rating,t=e.refresh,r=e.ratings,i=void 0===r?[]:r,c=e.number_purchased,l=e.likes,d=void 0===l?[]:l,u=(0,s.useState)(0),h=u[0],m=u[1];return(0,s.useEffect)((function(){i.length&&m(i[0].product)}),[i]),(0,a.jsxs)("div",{className:"tile is-ancestor is-flex-wrap-wrap",children:[(0,a.jsx)(v,{averageRating:n,ratingsLen:i.length,numberPurchased:c,likesLength:d.length}),(0,a.jsx)(j,{ratings:i,saveRating:function(e){(0,o.H1)(h,e).then(t)}})]})}function g(){var e=(0,r.useRouter)().query.id,n=(0,s.useState)({}),t=n[0],i=n[1],c=function(){(0,o.gk)(e).then((function(e){e&&i(e)}))};return(0,s.useEffect)((function(){e&&c()}),[e]),(0,a.jsx)("div",{className:"columns is-centered",children:(0,a.jsxs)("div",{className:"column",children:[(0,a.jsx)(h,{product:t,like:function(){(0,o.L8)(e).then(c)},unlike:function(){(0,o.SK)(e).then(c)}}),(0,a.jsx)(p,{refresh:c,number_purchased:t.number_sold,ratings:t.ratings,average_rating:t.average_rating,likes:t.likes})]})})}g.getLayout=function(e){return(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(c.Z,{}),e]})}}},function(e){e.O(0,[973,774,888,179],(function(){return n=2338,e(e.s=n);var n}));var n=e.O();_N_E=n}]);